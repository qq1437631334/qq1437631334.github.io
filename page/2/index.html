<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>w - w的blog</title><meta name="keywords" content="w"><meta name="author" content="w"><meta name="copyright" content="w"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="好好生活">
<meta property="og:type" content="website">
<meta property="og:title" content="w">
<meta property="og:url" content="http://oopsw.top/page/2/index.html">
<meta property="og:site_name" content="w">
<meta property="og:description" content="好好生活">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://oopsw.top/img/avatar.jpg">
<meta property="article:author" content="w">
<meta property="article:tag" content="w">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://oopsw.top/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://oopsw.top/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: w","link":"链接: ","source":"来源: w","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-01-10 11:26:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fas fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我的</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/%E5%92%8C%E6%9C%8D.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">w</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fas fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我的</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">w</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/qq1437631334" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1437631334@qq.com" target="_blank" title=""><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/07/Beats%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Beats学习笔记">     <img class="post_bg" src="/img/%E7%BB%BF%E6%B5%B7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Beats学习笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/Beats%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Beats学习笔记">Beats学习笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T10:08:20.000Z" title="发表于 2021-01-07 18:08:20">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ELK/">ELK</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ELK/Beats/">Beats</a></span></div><div class="content">Beats入门简介使用Beat收集nginx日志和指标数据
项目需求Nginx是一款非常优秀的web服务器，往往nginx服务会作为项目的访问入口，那么，nginx的性能保障就变得非常重要了，如果nginx的运行出现了问题就会对项目有较大的影响，所以，我们需要对nginx的运行有监控措施，实时掌握nginx的运行情况，那就需要收集nginx的运行指标和分析nginx的运行日志了。
业务流程
说明：

通过Beats采集Nginx的指标数据和日志数据
Beats采集到数据后发送到Elasticsearch中
Kibana读取数据进行分析
用户通过Kibana进行查看分析报表

部署Nginx部署教程可以参考这篇博客：CentOS下如何安装Nginx？
部署完成后，我们就可以启动nginx了
启动完成后，我们通过下面命令，就可以获取到nginx中的内容了
1tail -f /var/log/nginx/access.log
Beats简介通过查看ElasticStack可以发现，Beats主要用于采集数据
官网地址：https://www.elastic.co/cn/beats/

Bea ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/07/ElasticSearch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="ElasticSearch学习笔记">     <img class="post_bg" src="/img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch学习笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/ElasticSearch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="ElasticSearch学习笔记">ElasticSearch学习笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T10:05:20.000Z" title="发表于 2021-01-07 18:05:20">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ELK/">ELK</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ELK/ElasticSearch/">ElasticSearch</a></span></div><div class="content">ElasticSearch安装与介绍Elastic Stack简介如果你没有听说过Elastic Stack，那你一定听说过ELK，实际上ELK是三款软件的简称，分别是Elasticsearch、Logstash、Kibana组成，在发展的过程中，又有新成员Beats的加入，所以就形成了Elastic Stack。所以说，ELK是旧的称呼，Elastic Stack是新的名字。

全系的Elastic Stack技术栈包括：

ElasticsearchElasticsearch 基于java，是个开源分布式搜索引擎，它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。
LogstashLogstash 基于java，是一个开源的用于收集,分析和存储日志的工具。
KibanaKibana 基于nodejs，也是一个开源和免费的工具，Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的Web 界面，可以汇总、分析和搜索重要数据日志。
BeatsBeats是elastic公司开源的一款采集 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/07/spring%20security%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Spring Security学习笔记">     <img class="post_bg" src="/img/8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Security学习笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/spring%20security%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Spring Security学习笔记">Spring Security学习笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T09:59:21.000Z" title="发表于 2021-01-07 17:59:21">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring-Security/">Spring Security</a></span></div><div class="content">1.SpringSecurity 框架简介1.1 概要Spring 是非常流行和成功的 Java 应用开发框架，Spring Security 正是 Spring 家族中的 成员。Spring Security 基于 Spring 框架，提供了一套 Web 应用安全性的完整解决方 案。
正如你可能知道的关于安全方面的两个主要区域是“认证”和“授权”（或者访问控 制），一般来说，Web 应用的安全性包括用户认证（Authentication）和用户授权 （Authorization）两个部分，这两点也是 Spring Security 重要核心功能。

用户认证指的是：验证某个用户是否为系统中的合法主体，也就是说用户能否访问 该系统。用户认证一般要求用户提供用户名和密码。系统通过校验用户名和密码来完成认 证过程。通俗点说就是系统认为用户是否能登录 
用户授权指的是验证某个用户是否有权限执行某个操作。在一个系统中，不同用户 所具有的权限是不同的。比如对一个文件来说，有的用户只能进行读取，而有的用户可以 进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的 权限。通 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/07/shiro+redis%E6%95%B4%E5%90%88%E5%AE%9E%E7%8E%B0session%E6%8C%81%E4%B9%85%E5%8C%96%E7%99%BB%E9%99%86%E5%A4%B1%E8%B4%A5%E6%97%B6%E4%B9%9F%E4%BC%9A%E7%94%9F%E6%88%90session%E9%97%AE%E9%A2%98/" title="shiro+redis整合实现session持久化登陆失败时也会生成session问题">     <img class="post_bg" src="/img/%E7%BB%BF%E6%B5%B7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shiro+redis整合实现session持久化登陆失败时也会生成session问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/shiro+redis%E6%95%B4%E5%90%88%E5%AE%9E%E7%8E%B0session%E6%8C%81%E4%B9%85%E5%8C%96%E7%99%BB%E9%99%86%E5%A4%B1%E8%B4%A5%E6%97%B6%E4%B9%9F%E4%BC%9A%E7%94%9F%E6%88%90session%E9%97%AE%E9%A2%98/" title="shiro+redis整合实现session持久化登陆失败时也会生成session问题">shiro+redis整合实现session持久化登陆失败时也会生成session问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T03:50:20.000Z" title="发表于 2021-01-07 11:50:20">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Shiro/">Shiro</a></span></div><div class="content">前言今天在给博客更新，将session存到redis中持久化存储，正常操作是没问题的，但是后来尝试发现，在我输入的密码是错误的时候，他也创建了session，经过我的一番从尾到头的debug。。。。复杂的debug过程就不贴出来了，放出问题的根源在登陆时，会访问到我用来记录日志的切面,而我的记录日志方法中有一个需要获取到当前登录的用户的信息，来完善日志的字段

以下是工具类中的原方法：以下是修改后的方法这就是问题的根源，因为在我登录的时候，要记录日志，然后去调用工具类，工具类去获取session，如果没有getSession(false)的话，就会判断session是否存在，如果不存在的话就会自动创建session，这就是为什么明明密码错了还会创建session的原因

</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/07/dubbo-admin%E7%99%BB%E5%BD%95%E9%97%AE%E9%A2%98/" title="dubbo-admin登录问题">     <img class="post_bg" src="/img/7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="dubbo-admin登录问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/dubbo-admin%E7%99%BB%E5%BD%95%E9%97%AE%E9%A2%98/" title="dubbo-admin登录问题">dubbo-admin登录问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T03:40:51.000Z" title="发表于 2021-01-07 11:40:51">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Dubbo/">Dubbo</a></span></div><div class="content">dubbo-admin登录问题今天在学习dubbo时，clone了dubbo-admin这个dubbo的后台管理项目，结果配置了密码之后发现一直登录不上，也没有任何报错等消息，经过了不少时间的测试和在网上翻阅博客，发现了原来是配置文件里面有一个坑，我习惯性的认为是配置的是账号与密码，结果发现是配置的root的密码和guest的密码。无语。。。。。
</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/07/shiroFilter%E8%B8%A9%E5%9D%91/" title="shiroFilter踩坑">     <img class="post_bg" src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shiroFilter踩坑"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/shiroFilter%E8%B8%A9%E5%9D%91/" title="shiroFilter踩坑">shiroFilter踩坑</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T03:40:20.000Z" title="发表于 2021-01-07 11:40:20">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Shiro/">Shiro</a></span></div><div class="content">shiroFilter踩坑今天出门了一趟，没有关电脑，服务器一直开着，回来发现某一些shiro设置了放行的后端接口竟然无法访问了。经过一段时间的debug，总的来说找到了原因，就是shiro过滤器的问题，通过搜索资料找到了问题根源。原来是HashMap和LinkedMap的问题。 我使用的是HashMap，HashMap不会按照顺序去存储，而shiro有个要求，就是”authc” 这个权限必须得放在放行权限的后面”anon“。所以使用HashMap时会导致某一些需要放行的接口被放在了authc下面，导致放行无效。
</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/07/Mybatis%20%EF%BC%9Cif%EF%BC%9E%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98/" title="Mybatis &lt;if&gt;标签的使用问题">     <img class="post_bg" src="/img/6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis &lt;if&gt;标签的使用问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/Mybatis%20%EF%BC%9Cif%EF%BC%9E%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98/" title="Mybatis &lt;if&gt;标签的使用问题">Mybatis &lt;if&gt;标签的使用问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T03:40:17.000Z" title="发表于 2021-01-07 11:40:17">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Mybatis/">Mybatis</a></span></div><div class="content">Mybatis 标签的使用问题今天在使用Mybatis的时候发现前端传参’0’无效，无法更新字段，于是第一想到的就是百度解决，果然百度上已经有不少的案例了。
123456789101112131415&lt;update id=&quot;update&quot;&gt;        update bl_type            &lt;set&gt;                &lt;if test=&quot;typeName!=null and typeNmae!=&#x27;&#x27;&quot;&gt;                    type_name = #&#123;typeName&#125;,                &lt;/if&gt;                &lt;if test=&quot;typeBlogCount!=null and typeBlogCount!=&#x27;&#x27;&quot;&gt;                    type_blog_count = #&#123;typeBlogCount ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/07/springboot%20%E5%90%8E%E7%AB%AF%E4%BC%A0%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%B7%AE8%E5%B0%8F%E6%97%B6/" title="springboot 后端传给前端相差8小时">     <img class="post_bg" src="/img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="springboot 后端传给前端相差8小时"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/07/springboot%20%E5%90%8E%E7%AB%AF%E4%BC%A0%E7%BB%99%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%B7%AE8%E5%B0%8F%E6%97%B6/" title="springboot 后端传给前端相差8小时">springboot 后端传给前端相差8小时</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-07T03:31:51.000Z" title="发表于 2021-01-07 11:31:51">2021-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/SpringBoot/">SpringBoot</a></span></div><div class="content"> 在开发中日期最常打交道的东西之一，但是日期又会存在各式各样的格式，常见的情形就是，从数据库取出的日期往往都是时间戳（毫秒数）的形式，这个一般情况下是前端不想要的结果，需要进行处理，那在springboot中比较简单：因为后端传给前端时默认使用jackson转换格式所以我们可以

在application.yml中设置1234spring:  jackson:    date-format: yyyy-MM-dd HH:mm:ss    time-zone: GMT+8
在pojo对象上添加@JsonFormat注解12@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;GMT+8&quot;)private Date createdTime;
但是我在尝试了这两个方法以及相类似的方法，但是都无效，要么就是格式化无效，直接返回的时间戳，要么就是时间还是相差8个小时，但是格式化有效。

这时我看到了另外一篇不一样的博客，随后明白了为什么我的配置没有用，原来是因为我添加拦截器时写的配置类的问题。以下 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">w</div><div class="author-info__description">好好生活</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qq1437631334"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/qq1437631334" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1437631334@qq.com" target="_blank" title=""><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的个人博客，如果有什么想和我说的话可以在留言板留言噢</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/01/08/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="排序学习笔记"><img src="/img/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="排序学习笔记"/></a><div class="content"><a class="title" href="/2021/01/08/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="排序学习笔记">排序学习笔记</a><time datetime="2021-01-08T09:21:12.000Z" title="发表于 2021-01-08 17:21:12">2021-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/08/%E9%80%92%E5%BD%92%E5%9B%9E%E6%BA%AF%E5%AD%A6%E4%B9%A0/" title="递归回溯学习笔记"><img src="/img/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="递归回溯学习笔记"/></a><div class="content"><a class="title" href="/2021/01/08/%E9%80%92%E5%BD%92%E5%9B%9E%E6%BA%AF%E5%AD%A6%E4%B9%A0/" title="递归回溯学习笔记">递归回溯学习笔记</a><time datetime="2021-01-08T09:16:12.000Z" title="发表于 2021-01-08 17:16:12">2021-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/08/%E6%A0%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="栈学习笔记"><img src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="栈学习笔记"/></a><div class="content"><a class="title" href="/2021/01/08/%E6%A0%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="栈学习笔记">栈学习笔记</a><time datetime="2021-01-08T05:16:20.000Z" title="发表于 2021-01-08 13:16:20">2021-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/07/%E9%93%BE%E8%A1%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="链表学习笔记"><img src="/img/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="链表学习笔记"/></a><div class="content"><a class="title" href="/2021/01/07/%E9%93%BE%E8%A1%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="链表学习笔记">链表学习笔记</a><time datetime="2021-01-07T10:19:20.000Z" title="发表于 2021-01-07 18:19:20">2021-01-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/07/%E9%98%9F%E5%88%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="队列学习笔记"><img src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="队列学习笔记"/></a><div class="content"><a class="title" href="/2021/01/07/%E9%98%9F%E5%88%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="队列学习笔记">队列学习笔记</a><time datetime="2021-01-07T10:19:12.000Z" title="发表于 2021-01-07 18:19:12">2021-01-07</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Dubbo/"><span class="card-category-list-name">Dubbo</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Mybatis/"><span class="card-category-list-name">Mybatis</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Shiro/"><span class="card-category-list-name">Shiro</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SpringBoot/"><span class="card-category-list-name">SpringBoot</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SpringCloud/"><span class="card-category-list-name">SpringCloud</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="card-category-list-name">学习笔记</span><span class="card-category-list-count">12</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ELK/"><span class="card-category-list-name">ELK</span><span class="card-category-list-count">5</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ELK/Beats/"><span class="card-category-list-name">Beats</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories/">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ELK/" style="font-size: 1.37em; color: rgb(137, 136, 175)">ELK</a><a href="/tags/Kibana/" style="font-size: 1.1em; color: rgb(6, 182, 152)">Kibana</a><a href="/tags/Mybatis/" style="font-size: 1.1em; color: rgb(148, 84, 166)">Mybatis</a><a href="/tags/Dubbo/" style="font-size: 1.1em; color: rgb(6, 60, 61)">Dubbo</a><a href="/tags/Shiro/" style="font-size: 1.23em; color: rgb(170, 166, 85)">Shiro</a><a href="/tags/Redis/" style="font-size: 1.1em; color: rgb(182, 101, 2)">Redis</a><a href="/tags/Filter/" style="font-size: 1.1em; color: rgb(190, 84, 95)">Filter</a><a href="/tags/SpringBoot/" style="font-size: 1.1em; color: rgb(139, 185, 144)">SpringBoot</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.5em; color: rgb(73, 146, 92)">数据结构</a><a href="/tags/Array/" style="font-size: 1.1em; color: rgb(12, 121, 69)">Array</a><a href="/tags/%E9%80%92%E5%BD%92%E5%9B%9E%E6%BA%AF/" style="font-size: 1.1em; color: rgb(144, 177, 75)">递归回溯</a><a href="/tags/Queue/" style="font-size: 1.1em; color: rgb(85, 46, 135)">Queue</a><a href="/tags/Logstash/" style="font-size: 1.1em; color: rgb(119, 159, 79)">Logstash</a><a href="/tags/Beats/" style="font-size: 1.1em; color: rgb(162, 122, 140)">Beats</a><a href="/tags/SpringCloud/" style="font-size: 1.1em; color: rgb(188, 174, 16)">SpringCloud</a><a href="/tags/SpringCloudAlibaba/" style="font-size: 1.1em; color: rgb(181, 152, 169)">SpringCloudAlibaba</a><a href="/tags/Nacos/" style="font-size: 1.1em; color: rgb(21, 45, 40)">Nacos</a><a href="/tags/Sort/" style="font-size: 1.1em; color: rgb(12, 150, 9)">Sort</a><a href="/tags/Stack/" style="font-size: 1.1em; color: rgb(117, 134, 92)">Stack</a><a href="/tags/LinkedList/" style="font-size: 1.1em; color: rgb(137, 57, 77)">LinkedList</a><a href="/tags/Spring-Security/" style="font-size: 1.1em; color: rgb(75, 195, 137)">Spring Security</a><a href="/tags/ElasticSearch/" style="font-size: 1.1em; color: rgb(185, 30, 104)">ElasticSearch</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">18</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">18</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-01-07T04:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">57.5k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-01-10T03:26:19.447Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 By w</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a href="https://beian.miit.gov.cn/" target="_blank"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var from = '出自 ' + data.from
        var sub = "今天也是喜欢小羊妹妹的一天".length == 0 ? new Array() : "今天也是喜欢小羊妹妹的一天".split(',')
        var both = sub.unshift(data.hitokoto, from)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: false,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<[^>]+>/g,"") // remove html tag
    content = content.replace(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|webp)/g, '') // remove image link
    content = content.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi, '') // remove url

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'myblog-cloudbase-0fahk0qccd61fec',
        region: 'ap-shanghai',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        saveToLocal.set('twikoo-newest-comments', JSON.stringify(res), 10/(60*24))
        generateHtml(res)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          let name = 'src'
          if(false) {
            name = 'data-lazy-src'
          }
          result += `<a href='${array[i].url + '#' + array[i].id}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url + '#' + array[i].id}'>${changeContent(array[i].commentText)}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].created, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="2941656328" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" data-lrctype="0" muted></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config_change',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})</script></div></body></html>